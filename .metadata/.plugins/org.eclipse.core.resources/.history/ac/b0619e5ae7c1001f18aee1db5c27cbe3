/*
 * AT24C08.c
 *
 *  Created on: Dec 24, 2024
 *      Author: hyn02
 */

#include "AT24C08.h"
#include "i2c.h"

void AT24C08_Page_Write(unsigned char page, unsigned char* data, unsigned char len)
{
	unsigned char devAddress = ((page*16)>>8<<1) | 0xA0;
	unsigned char wordAddress = (page * 16) & 0xff;
	// 쓰기 금지 해제
	LL_GPIO_ResetOutputPin(GPIOC, LL_GPIO_PIN_13);
	HAL_I2C_Mem_Write(&hi2c1, devAddress, wordAddress, I2C_MEMADD_SIZE_8BIT, &data[0], 16, 1);
	HAL_Delay(1);
	LL_GPIO_SetOutputPin(GPIOC, LL_GPIO_PIN_13);
}

void AT24C08_Page_Read(unsigned char page, unsigned char* data, unsigned char len)
{
	unsigned char devAddress = ((page*16)>>8<<1) | 0xA0;
	unsigned char wordAddress = (page * 16) & 0xff;
	// 쓰기 금지 해제
	LL_GPIO_ResetOutputPin(GPIOC, LL_GPIO_PIN_13);
	HAL_I2C_Mem_Write(&hi2c1, devAddress, wordAddress, I2C_MEMADD_SIZE_8BIT, &data[0], 16, 1);
	HAL_Delay(1);
	LL_GPIO_SetOutputPin(GPIOC, LL_GPIO_PIN_13);
}
